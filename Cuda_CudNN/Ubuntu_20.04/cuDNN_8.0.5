#!/bin/bash

#'---------------Download cuDNN 8.0.5---------------'
#you need to have an account in nvidia
#link: https://developer.nvidia.com/rdp/cudnn-download
#after login and check "I Agree To the Terms of the cuDNN Software License Agreement" you can see "Archived cuDNN Releases" link
#in this page, find "Download cuDNN v8.0.5 (November 9th, 2020), for CUDA 11.1"
#download this 3 file
#cuDNN Runtime Library for Ubuntu20.04 x86_64 (Deb)
#cuDNN Developer Library for Ubuntu20.04 x86_64 (Deb)
#cuDNN Code Samples and User Guide for Ubuntu20.04 x86_64 (Deb)

echo '---------------Intall cuDNN ---------------'
sudo dpkg -i libcudnn8_8.0.5.39-1+cuda11.1_amd64.deb
sudo dpkg -i libcudnn8-dev_8.0.5.39-1+cuda11.1_amd64.deb
sudo dpkg -i libcudnn8-samples_8.0.5.39-1+cuda11.1_amd64.deb

echo '---------------Test cuDNN ---------------'
sudo apt -y install libfreeimage3 libfreeimage-dev

cp -r /usr/src/cudnn_samples_v8/ $HOME
cd  $HOME/cudnn_samples_v8/mnistCUDNN
make clean && make
./mnistCUDNN

